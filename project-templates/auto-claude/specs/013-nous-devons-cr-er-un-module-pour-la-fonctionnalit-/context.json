{
  "task_description": "Create WishlistModerna module as a standalone Thelia module, extracting functionality from embedded template controller",
  "scoped_services": [
    {
      "name": "WishlistModerna module",
      "path": "local/modules/WishlistModerna/",
      "role": "Primary - new Thelia module to be created"
    },
    {
      "name": "Moderna template",
      "path": "templates/frontOffice/moderna/",
      "role": "Source - extract WishlistController from here"
    },
    {
      "name": "Main Thelia project",
      "path": "/Applications/Sites/Moderna_twig/thelia/",
      "role": "Configuration - update composer.json"
    }
  ],
  "files_to_modify": {
    "module": [
      "local/modules/WishlistModerna/WishlistModerna.php",
      "local/modules/WishlistModerna/Config/module.xml",
      "local/modules/WishlistModerna/Config/config.xml",
      "local/modules/WishlistModerna/Config/routing.xml",
      "local/modules/WishlistModerna/Controller/WishlistController.php",
      "local/modules/WishlistModerna/composer.json"
    ],
    "main_project": [
      "/Applications/Sites/Moderna_twig/thelia/composer.json"
    ],
    "cleanup": [
      "templates/frontOffice/moderna/src/Api/WishlistController.php"
    ]
  },
  "files_to_reference": [
    "local/modules/RecentlyViewedModerna/RecentlyViewedModerna.php",
    "local/modules/RecentlyViewedModerna/Config/module.xml",
    "local/modules/RecentlyViewedModerna/Config/config.xml",
    "local/modules/RecentlyViewedModerna/Config/routing.xml",
    "local/modules/RecentlyViewedModerna/Controller/RecentlyViewedController.php",
    "local/modules/RecentlyViewedModerna/composer.json",
    "templates/frontOffice/moderna/src/Api/WishlistController.php"
  ],
  "patterns": {
    "module_class": "Extend BaseModule, implement postActivation() for DB table creation using direct SQL",
    "controller_pattern": "Inject SecurityContext via constructor, use Propel connections for SQL",
    "service_registration": "Register controller as public service in config.xml with controller.service_arguments tag",
    "routing": "XML format with full namespace controller references",
    "composer_package": "Type thelia-module with installer-name in extra"
  },
  "existing_implementations": {
    "description": "Wishlist functionality exists in template at src/Api/WishlistController.php using session-based auth",
    "table_name": "customer_wishlist",
    "endpoints": [
      "POST /moderna-api/wishlist/sync",
      "POST /moderna-api/wishlist/add",
      "POST /moderna-api/wishlist/remove",
      "POST /moderna-api/wishlist/clear"
    ]
  },
  "created_at": "2026-01-11T16:45:59.206916"
}
